<% Current.title = 'Cryptocurrencies' %>

<% cache do %>
  <%= render 'shared/navbar' %>

  <%= render_component 'Currencies',
    title: 'Cryptocurrencies',
    headers: {
      title: 'Name',
      marketCapUsd: 'Market capitalization',
      priceUsd: 'Price',
      circulatingSupply: 'Circulating supply',
      priceChange24hPercent: 'Change (24h)'
    },
    items: @currencies,
    sortColumn: 'marketCapUsd',
    sortOrder: 'desc',
    assets: @currencies.each_with_object({icon: {}}) { |currency, assets|
      assets[:icon][currency.symbol] =
        "images/icons/currencies/#{currency.symbol.downcase}.svg"
    },
    paths: @currencies.each_with_object({show: {}}) { |currency, paths|
      paths[:show][currency.symbol] = currency_path(currency)
    }
  %>

  <%= render 'shared/footer' %>
<% end %>
